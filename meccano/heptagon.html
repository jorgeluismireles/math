<!DOCTYPE html>
<html>
<head>
<title>Heptagon</title>
<script type="text/javascript" src="meccano.js"></script>
<style>
td { vertical-align:top; }
</style>
</head>
<body>
<h1>Meccano heptagon</h1>

<script>
  const R =  r  => `rotate(${r})`
  const r0 = 90 - 180/7
  const r1 = 2 * 180/7
  const r2 = 90 -3*180/7
</script>

<table>

<tr>
<td>
<svg xmlns="http://www.w3.org/2000/svg" width="340" height="340">
 <g id="heptagon3-4">
  <g fill="#08f" fill-opacity="0.5" stroke="#008" id="pa"></g>
  <g fill="#f80" fill-opacity="0.5" stroke="#800" id="pb"></g>
 </g>
</svg>
<script>
{
  const r = 20

  dt("heptagon3-4", null, "translate(170,40) scale(1 1)")

  const r3 = () => rod(r, 6, true)
  const r4 = () => rod(r, 8, true) 

  const t1 = `translate(0 ${2*r})`
  const t2 = `translate(0 ${4*r})`
  const t3 = `translate(0 ${6*r})`

  $("pa", pp("pa", [ 1,2,3,4,5,6,7,8,9,10,11 ]))
  $("pb", pp("pb", [ 1,2,3,4 ]))

  dt("pa1", r3(), `${R(+r0)}`)
  dt("pa2", r3(), `${R(-r0)}`)
  dt("pa3", r3(), `${R(+r0)} ${t3} ${R(-r1)}`)
  dt("pa4", r3(), `${R(-r0)} ${t3} ${R(+r1)}`)
  dt("pa5", r3(), `${R(+r0)} ${t3} ${R(-r1)} ${t3} ${R(-r1)}`)
  dt("pa6", r3(), `${R(-r0)} ${t3} ${R(+r1)} ${t3} ${R(+r1)}`)
  dt("pa7", r3(), `${R(+r0)} ${t3} ${R(-r1)} ${t3} ${R(-r1)} ${t3} ${R(-r1)}`)

  dt("pa8", r3(), `${R(+r2)}`)
  dt("pa9", r3(), `${R(-r2)}`)
  dt("pa10", r3(), `${R(+r2)} ${t3} ${R(+r1)}`)
  dt("pa11", r3(), `${R(-r2)} ${t3} ${R(-r1)}`)

  dt("pb1", r4(), `${R(+r0)} ${t3} ${R(-r1)} ${t3} ${R(-r1)} ${t1} ${R(-82.90)}`)
  dt("pb2", r4(), `${R(+r0)} ${t3} ${R(-r1)} ${t3} ${R(-r1)} ${t2} ${R(-97.17)}`)

  dt("pb3", r4(), `${R(-r0)} ${t3} ${R(+r1)} ${t3} ${R(+r1)} ${t1} ${R(+82.90)}`)
  dt("pb4", r4(), `${R(-r0)} ${t3} ${R(+r1)} ${t3} ${R(+r1)} ${t2} ${R(+97.17)}`)
}
</script>
</td>
<td>
<pre>
Smallest meccano heptagon:
             _____
Do a = 3 and r1 r2 = 1/2
   _____
   q1 r2 = sqrt( 1/4 + 7*9 / 4))
         = 4
</pre>
</td>
</tr>

<tr>
<td>
<svg xmlns="http://www.w3.org/2000/svg" width="440" height="440">
 <g id="heptagon8-11" transform="translate(250 250)">
  <g fill="#08f" fill-opacity="0.5" stroke="#008" id="pc"></g>
  <g fill="#f80" fill-opacity="0.5" stroke="#800" id="pd"></g>
 </g>
</svg>
<script type="text/javascript">
  const r = 20
  dt("heptagon8-11", null, "translate(220,40) scale(1 1)")

  $("pc", pp("pc", [ 1,2,3,4,5,6,7,8,9,10,11 ]))
  $("pd", pp("pd", [ 1,2,3,4 ]))

  const r8  = () => rod(r, 8)
  const r11 = ()=>  rod(r, 11)
  const t8  = `translate(0 ${8*r})`

  dt("pc1", r8(), `${R(+r0)}`)
  dt("pc2", r8(), `${R(-r0)}`)
  dt("pc3", r8(), `${R(+r0)} ${t8} ${R(-r1)}`)
  dt("pc4", r8(), `${R(-r0)} ${t8} ${R(+r1)}`)
  dt("pc5", r8(), `${R(+r0)} ${t8} ${R(-r1)} ${t8} ${R(-r1)}`)
  dt("pc6", r8(), `${R(-r0)} ${t8} ${R(+r1)} ${t8} ${R(+r1)}`)
  dt("pc7", r8(), `${R(+r0)} ${t8} ${R(-r1)} ${t8} ${R(-r1)} ${t8} ${R(-r1)}`)

  dt("pc8", r8(), `${R(+r2)}`)
  dt("pc9", r8(), `${R(-r2)}`)
  dt("pc10", r8(), `${R(+r2)} ${t8} ${R(+r1)}`)
  dt("pc11", r8(), `${R(-r2)} ${t8} ${R(-r1)}`)

  const t1 = `translate(0 ${1*r})`
  const t7 = `translate(0 ${7*r})`

  dt("pd1", r11(), `${R(+r0)} ${t8} ${R(-r1)} ${t8} ${R(-r1)} ${t1} ${R(-74.1)}`)
  dt("pd2", r11(), `${R(+r0)} ${t8} ${R(-r1)} ${t8} ${R(-r1)} ${t7} ${R(-105.7)}`)

  dt("pd3", r11(), `${R(-r0)} ${t8} ${R(+r1)} ${t8} ${R(+r1)} ${t1} ${R(+74.1)}`)
  dt("pd4", r11(), `${R(-r0)} ${t8} ${R(+r1)} ${t8} ${R(+r1)} ${t7} ${R(+105.7)}`)
</script>

</td>
<td>
<pre>
             _____
Do a = 8 and r1 r2 = 3, to get 't Hooft heptagon:
   _____
   q1 r2 = sqrt( 9 + 7*64 / 4)
         = 11
</pre>
</td>
</tr>


<tr>
<td>
<a href="automatic/heptagon_construction_js.svg">
<object data="automatic/heptagon_construction_js.svg" type="image/svg+xml">
  
</object>
<div>automatic/heptagon_construction_js.svg</div>
</a>
</td>
<td>
<pre>
Heptagonal triangle angles:

    A = 1*pi/7, B = 2*pi/7, C = 3*pi/7
    
Heptagonal sides:
        _____   _____   _____
    a = p6 q1 = p1 p7 = p6 p7

Heptagonal sines:
            _____   _____   _____
    sin A = q4 p6 / p6 q1 = q4 p6 / a
            _____   _____   _____
    sin B = q2 p1 / p1 p7 = q2 p1 / a
            _____   _____   _____
    sin C = q3 p6 / p6 p7 = q3 p6 / a

Finding heptagonal internal height:
    _____   _____   _____   _____
    r1 q1 = p1 q2 + q3 p6 - p6 q4
          = a * (sin B + sin C - sin A)

According <a href="https://en.wikipedia.org/wiki/Heptagonal_triangle">heptagonal triangles</a>, we know:

    sin A - sin B - sin C = - sqrt(7)/2

So:
   _____   
   r1 q1 = a * sqrt(7) / 2

Then (orange):
   _____         _____2   _____2  
   q1 r2 = sqrt( r1 r2  + r1 q1 )
                 _____2
         = sqrt( r1 r2  + 7*a*a / 4)
</pre>
</td>
</tr>


</table>
</body>


<script type="text/javascript">
// 7a*a + e*e = 4d*d
// d = sqrt(7*a*a + e*e)/2
// Euclid algorithm for Greates Common Divisor
const gcd = (a, b)=> { return !b ? a : gcd(b, a % b) } 

let c = 1
for (let a=2; a < 100; a++) {
  // e=0, e=a creates no integers
  for (let e=1; e < a; e++) {
    const d = Math.sqrt(7*a*a + e*e)/2
    if ((d - parseInt(d)) == 0) {
      const _gcd = gcd(d, gcd(a, e))
      if (_gcd == 1) {
        if (c <= 10 || (a-e) == 2 || e == 1)
          console.log(`N=${c}: a=${a} d=${d} e=${e}`)
        c++
      }
    }
  }
}
</script>
</html>