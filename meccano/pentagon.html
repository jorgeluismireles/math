<!DOCTYPE html>
<html>
<head>
  <title>Meccano pentagon</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>


<script type="text/javascript" src="meccano.js"></script>
<script type="text/javascript" src="node/pentagon.js"></script>
<style>
span { color:#f80; }		
pre { background-color: #cde; padding:10px;}
i { color:red; }
.particular { background-color: #ff8; }
td { vertical-align: top; }
tt { background-color: #abc; padding:3px;}
.inline { display: inline-block; text-align: top; }
#p1-code, #p2-code { font-size: 10px; }
</style>


</head>
<body>

<div>
<a href="https://www.mathjax.org/#gettingstarted">mathjax.org</a>
</div>
</div>

<h1>Meccano regular pentagons</h1>
<div>
<a href="http://www.staff.science.uu.nl/~hooft101/lectures/meccano.pdf">Gerard ’t Hooft meccano mathematics</a>

<h2>Pentagons angles</h2>
<div>
Two angles identify a regular pentagon:
\begin{align*}

5A &= {2\pi} \\
5B &= {\pi} \\
4\cos(A) &=  -1 + \sqrt{5} \\
4\cos(B) &=   1 + \sqrt{5} \\

8\cos^2(A) &= { 3 - \sqrt{5}} \\
8\cos^2(B) &= { 3 + \sqrt{5}} \\

4\cos(A)\cos(B) &= 1 \\

8\sin^2(A) &= 5 + \sqrt{5} \\
8\sin^2(B) &= 5 - \sqrt{5} \\
4\sin(A)\sin(B) &= \sqrt{5}

\end{align*}
</div>

<h2>Pentagons I</h2>
<p>
<object data="inkscape/pentagon1.svg" type="image/svg+xml"></object>
</p>
<p>
A pentagon type I has three integral rods (or sections of rods) \( a, b, c \) at fixed angles. We want to find a fourth integral rod \( d \) in order to make regular pentagons like the diagram above. We start by looking \( d \) relations with other rods:
\begin{align*}
d_x^2 &= ( (a + c)\cos(A) + b)^2 \\
      &= (a + c)^2\cos^2(A) + 2(a + c)b\cos(A) + b^2 \\
d_y^2 &= ( (a - c)\sin(A))^2 \\
      &= (a - c)^2\sin^2(A) \\

d^2 &= d_x^2 + d_y^2 \\
    &= (a + c)^2\cos^2(A)
    + (a - c)^2\sin^2(A)
    + 2(a + c)b\cos(A)
    + b^2 \\
    &= (a + c)^2(3 - \sqrt{5})/8 \\
    &\qquad + (a - c)(5 + \sqrt{5})/8 \\
    &\qquad + 2(a + c)b(-1 + \sqrt{5})/4 \\
    &\qquad + b^2 \\
    &= m\sqrt{5} + n \\

\end{align*}

Last equation has two parts, \( m \) with factors of \( \sqrt{5} \) and \( n \) with integers, so:

\begin{align*}
8m  &= -(a + c)^2 + (a - c)^2 + 4(a + c)b \\
    &= 4(a + c)b - 4ac \\
8n &= 3(a + c)^2 + 5(a - c)^2 - 4(a + c)b + 8b^2 \\
\end{align*}

Simplifying:

\begin{align*}
m   &= \frac{ ab - ac + bc}{2} \\
n  &= \frac{ a^2 + b^2 + c^2 - ab - ac - cb }{2} \\
   &= \frac{ a^2 + b^2 + c^2 - ac }{2} + m
\end{align*}

\( d\) is an integer when:
<ol>
<li> \( m = 0 \), to vanish \( \sqrt{5} \) from equations.</li>
<li> \(n_{m=0} \) is a square.</li>
</ol>
\begin{align*}
(a + c)b &= ac \\
n_{m=0} &= a^2 + b^2 + c^2 - ac \\
d &= \sqrt{n_{m=0}}
\end{align*}

This diofantine equation should be solved:
\begin{align*}
d^2 = a^2 + b^2 + c^2 - ac
\end{align*}
</div>

<p>
Next javascript program finds a single solution for a <= 5000!  
<b>a=12, b=3, c=4, d=11</b>.
</p>
<table>
<tr>
<td>
<pre id="p1-code"></pre>
</td>
<td>
<div><button id="p1-button">find(1000)</button></div>
<div id="p1-message"></div>
<div id="p1-list"></div>
<div>
</td>
</tr>
<script type="text/javascript">
  $("p1-code", MeccanoPentagonI.toString().replace(/\t/g, "&nbsp;&nbsp;"))
  document.getElementById("p1-button").onclick = ()=> {
    const n = 1000
    const list = []
    const p1 = new MeccanoPentagonI(list)
    $("p1-message", `Testing all a <= ${n}...`)
    $("p1-list", "")
    const now = +new Date()
    setTimeout(function() {
      const result = p1.find(n)   
      $("p1-message", `Solutions:${list.length} a<= ${n} ms:${+new Date() - now}`)
      $("p1-list", list.map(l => `${JSON.stringify(l)}<br/>`))
    }, 50)
  }
</script>
</table>




<script>
const P2 = new MeccanoPentagonII()
</script>


<h2>Pentagons II</h2>
<p>
<object data="inkscape/pentagon2.svg" type="image/svg+xml"></object>
</p>
<p>
A pentagon type II has four integral rods (or sections of rods) \( a, b, c, d \) at fixed angles. We want to find a fifth integral rod \( e \) in order to make regular pentagons like the diagram above. We start by looking \( e \) relations with the rest of rods:
\begin{align*}
e_x &= b\cos(A) + a + c\cos(A) - d\cos(B) \\
      &= a + (b + c)\cos(A) - d\cos(B) \\

e_y &= c\sin(A) - b\sin(A) - d\sin(B) \\
      &= (c - b)\sin(A) - d\sin(B) 
\\
e^2 &= e_x^2 + e_y^2 \\
    &= a^2 + (b + c)^2\cos^2(A) + d^2\cos^2(B) \\
    &\qquad + 2a(b + c)\cos(A) - 2ad\cos(B) \\
    &\qquad - 2(b + c)d\cos(A)cos(B) \\
    &\qquad + (c - b)^2\sin^2(A) + d^2\sin^2(B) \\
    &\qquad - 2(c - b)d\sin(A)\sin(B) \\
    &= a^2 - 2(b + c)d / 4 \\
    &\qquad + (b + c)^2 ( 3 - \sqrt{5}) / 8 \\
    &\qquad + d^2       ( 3 + \sqrt{5}) / 8 \\
    &\qquad + 2a(b + c) (-1 + \sqrt{5}) / 4 \\
    &\qquad - 2ad( 1 + \sqrt{5}) / 4 \\
    &\qquad + (c - b)^2 ( 5 + \sqrt{5}) / 8 \\
    &\qquad + d^2       ( 5 - \sqrt{5}) / 8 \\
    &\qquad - 2(c - b)d ( \sqrt{5}) / 4 \\
    &= m\sqrt{5} + n \\
\end{align*}

Last equation has two parts, \( m \) with factors of \( \sqrt{5} \) and \( n \) with integers, so:

\begin{align*}
8m &= -(b+c)^2 + d^2 + 4a(b+c) - 4ad + (c-b)^2 - d^2 - 4(c-b)d \\
8n &= 8a^2 + 3(b+c)^2 + 3d^2 - 4a(b+c) - 4ad - 4(b+c)d + 5(c-b)^2 + 5d^2 \\
\end{align*}

Simplifying:

\begin{align*}
m &= \frac{(a - b)(c - d) + ab - cd}{2} \\
n &= \frac{ a^2 + b^2 + c^2 + d^2 - ((a + b)(c + d) + ab + cd )}{2} \\
  &= \frac{ a^2 + b^2 + c^2 + d^2 - ad - bc - cd }{2} + m

\end{align*}

\( d\) is an integer when:
<ol>
<li> \( m = 0 \), to vanish \( \sqrt{5} \) from equations.</li>
<li> \(n_{m=0} \) is a square.</li>
</ol>
\begin{align*}
(a - b)(c - b ) + ab &= cd \\
n_{m=0} &= a^2 + b^2 + c^2 + d^2 - ad - bc - cd \\
e &= \sqrt{n_{m=0}}
\end{align*}

This diofantine equation should be solved:
\begin{align*}
e^2 = a^2 + b^2 + c^2 + d^2 - ad - bc - cd
\end{align*}
</div>



<p>
Next javascript program finds SEVERAL solutions
</p>
<table>
<tr>
<td>
<pre id="p2-code"></pre>
</td>
<td>
<div><button id="p2-button">find(200)</button></div>
<div id="p2-message"></div>
<div id="p2-list"></div>
<div>
</td>
</tr>
<script type="text/javascript">
  $("p2-code", MeccanoPentagonII.toString().replace(/\t/g, "&nbsp;&nbsp;"))
  document.getElementById("p2-button").onclick = ()=> {
    const n = 200
    const list = []
    const p2 = new MeccanoPentagonII(list)
    $("p2-message", `Testing all a <= ${n}...`)
    $("p2-list", "")
    const now = +new Date()
    setTimeout(function() {
      const result = p2.find(n)   
      $("p2-message", `Solutions:${list.length} a<= ${n} ms:${+new Date() - now}`)
      $("p2-list", list.map(l => `${JSON.stringify(l)}<br/>`))
    }, 50)
  }
</script>
</table>

<!--script>
{
	document.getElementById("sol2").onclick = ()=> {
		$("sol2Mess", "...")
		$("sol2List", "...")
		const solList = []
		const message = (text)=> { $("sol2Mess", text) }
		const list = (text)=> { solList.push(text); $("sol2List", solList.join("\n")) }
		P2.solutions(300, message, list)		
	}

/*
	const A = 2*Math.PI/5
	const B = 1*Math.PI/5

	const cosA = sqrt5(-1, 1, 4) // (Math.sqrt(5) - 1 ) / 4 // Math.cos(A) // cos72°
	const cosB = sqrt5( 1, 1, 4) // (Math.sqrt(5) + 1 ) / 4 // Math.cos(B) // cos72°

	const sinA = (Math.sqrt(2*(5 + Math.sqrt(5)))) / 4 // Math.sin(A) // sin72°
	const sinB = Math.sqrt( 10 - 2*Math.sqrt(5) ) / 4  // Math.sin(B) // sin36°

	const a = 12, b = 2, c = 9, d = 6

	const ex = b*cosA + a + c*cosA - d*cosB
	const ey = c*sinA - b*sinA - d*sinB

	$("A2", 180*A/Math.PI)
	$("B2", 180*B/Math.PI)

	$("sinA",          `${sinA} = ${ Math.sqrt(sqrt5(10,  2, 16)) }`)
	$("sinB",          `${sinB} = ${ Math.sqrt(sqrt5(10, -2, 16)) }`)

	$("cosA",          `${cosA} = ${sqrt5(-1,  1, 4)}`)
	$("cosB",          `${cosB} = ${sqrt5( 1,  1, 4)}`)
	$("cosAcosA", `${cosA*cosA} = ${sqrt5( 3, -1, 8)}`)
	$("cosBcosB", `${cosB*cosB} = ${sqrt5( 3,  1, 8)}`)
	$("cosAcosB", `${cosA*cosB} = ${sqrt5( 1,  0, 4)}`)

	$("sinAsinA", `${sinA*sinA} = ${sqrt5( 5,  1, 8)}`)
	$("sinBsinB", `${sinB*sinB} = ${sqrt5( 5, -1, 8)}`)
	$("sinAsinB", `${sinA*sinB} = ${sqrt5( 0,  1, 4)}`)


	$("abcdRad", P2.R(a,b,c,d))
	$("abcdInt", P2.Z(a,b,c,d))*/
}
</script-->
<div>Pentagons side 31:</div>
<img src="inkscape/pentagons-2-31.svg" width="500"></img>
<div>Pentagons side 38:</div>
<img src="inkscape/pentagons-2-38.svg" width="500"></img>

<div>Pentagons side 48:</div>
<pre>
n= 7 a=48 b= 8 c=24 d=21 e=41
n= 8 a=48 b=12 c= 9 d=20 e=41
n= 9 a=48 b=27 c=24 d=40 e=41
n=10 a=48 b=28 c=39 d=36 e=41
</pre>
<img src="inkscape/pentagons-2-48.svg" width="800"></img>



<h2>Pentagon 3</h2>

<div style="color:red;">Maybe with no solutions!</div>

<table>
<tr>
<td>
<object data="inkscape/pentagon3.svg" type="image/svg+xml"></object>
</td>
<td>
<pre>
fx = a*cosA + b + d*cosE
fy = a*sinA - d*sinE

fx*fx = (a*cosA + b + d*cosE)*(a*cosA + b + d*cosE)
        +   a*a*cosA*cosA
        +   b*b
        +   d*d*cosE*cosE
        + 2*a*b*cosA
        + 2*a*d*cosA*cosE
        + 2*b*d*cosE

fy*fy = (a*sinA - d*sinE)*(a*sinA - d*sinE)
        +   a*a*sinA*sinA
        - 2*a*d*sinA*sinE
        +   d*d*sinE*sinE

f*f = fx*fx + fy*fy =         
        +   a*a + b*b + d*d
        + 2*a*cosA * b
        + 2*a*cosA * d*cosE
        + 2*b      * d*cosE
        - 2*a*d    * sqrt(sinA*sinA*sinE*sinE)
</pre>
</td>
</tr>
</table>

<pre>
    cosA = (-1 + sqrt(5)) / 4
    cosE = (c*c + d*d - e*e) / (2*c*d)

2*a*cosA = a*(-1 + sqrt(5)) / 2
  d*cosE = (c*c + d*d - e*e) / (2*c)

    sinA*sinA = [ (5 + sqrt(5)) / 2 ] / 4  
d*sinE*d*sinE = d*d - (d*cosE)*(d*cosE)
              = d*d - (c*c + d*d - e*e)*(c*c + d*d - e*e) / (4*c*c)
              = [ 4*c*c*d*d - (c*c + d*d - e*e)*(c*c + d*d - e*e) ] / (4*c*c)

sqrt(sinA*sinA*d*sinE*d*sinE) =
              = sqrt([ 4*c*c*d*d - (c*c + d*d - e*e)*(c*c + d*d - e*e) ] * (5 + sqrt(5)) / 2) / 2c

f*f =
    +   a*a + b*b + d*d
    + (a*(-1 + sqrt(5))/2) * b
    + (a*(-1 + sqrt(5))/2) * (c*c + d*d - e*e) / (2*c)
    + 2*b                  * (c*c + d*d - e*e) / (2*c)
    - 2*a * sqrt( sinA*sinA * sinE*sinE*d*d )

</pre>

<table>
<tr>
<td>
<pre>
8*fx*fx = 
  +  8*a*a*(3 - sqrt(5))/8
  +  8*b*b
  +  8*d*d*(c*c + d*d - e*e)*(c*c + d*d - e*e) / (4*c*c*d*d)
  + 16*a*b*((-1 + sqrt(5)) / 4)
  + 16*a*d*((-1 + sqrt(5)) / 4)*(c*c + d*d - e*e) / (2*c*d)
  + 16*b*d*(c*c + d*d - e*e) / (2*c*d)

  = 
  +1*a*a*(3 - sqrt(5))
  + 8*b*b
  + 2*(c*c + d*d - e*e)*(c*c + d*d - e*e) / (c*c)
  + 4*a*b*(-1 + sqrt(5))
  + 2*a*(-1 + sqrt(5))*(c*c + d*d - e*e) / c
  + 8*b*(c*c + d*d - e*e) / c

8*fx*fx = 8*fxz + 8*fxr*sqrt(5)

8*fxz 
  = 
  + 3*a*a
  + 8*b*b
  + 2*(c*c + d*d - e*e)*(c*c + d*d - e*e) / (c*c)
  - 4*a*b*
  - 2*a*(c*c + d*d - e*e) / c
  + 8*b*(c*c + d*d - e*e) / c
  = <b>
  + 3*a*a* - 4*a*b* + 8*b*b
  + 2*(c*c + d*d - e*e)*(c*c + d*d - e*e) / (c*c)
  - 2*a*(c*c + d*d - e*e) / c
  + 8*b*(c*c + d*d - e*e) / c
    </b>
8*fxr = <b>
  - 1*a*a
  + 4*a*b
  + 2*a*(c*c + d*d - e*e) / c
    </b>
</pre>
</td>

<td>
<pre>
8*fy*fy =
  +   a*a*(5 + sqrt(5))
  - 16*a*d*sinA*sinE
  +  8*d*d*( 4*c*c*d*d - (c*c + d*d - e*e)*(c*c + d*d - e*e)) / (4*c*c*d*d)
  = 
  +   a*a*(5 + sqrt(5))
  - 16*a*d*sinA*sinE
  +  2*(4*c*c*d*d - (c*c + d*d - e*e)*(c*c + d*d - e*e)) / (c*c)
  = 
  +   a*a*(5 + sqrt(5))
  - <i>16*a*d*sinA*sinE</i>
  +  8*d*d
  -  2*(c*c + d*d - e*e)*(c*c + d*d - e*e) / (c*c)




</pre>
</td>
</tr>
</table>

</body>
</html>